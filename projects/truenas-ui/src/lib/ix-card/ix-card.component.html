<div [ngClass]="classes()">
  <!-- Header section -->
  @if (hasHeader()) {
    <div class="ix-card__header">
      <div class="ix-card__header-left">
        @if (title()) {
          <h3
            class="ix-card__title"
            [class.ix-card__title--link]="titleLink()"
            (click)="onTitleClick()">
            {{ title() }}
          </h3>
        }
      </div>

      <div class="ix-card__header-right">
        <!-- Header Status -->
        @if (headerStatus(); as status) {
          <div
            class="ix-card__status"
            [ngClass]="getStatusClass(status?.type)">
            {{ status.label }}
          </div>
        }

        <!-- Header Control (Slide Toggle) -->
        @if (headerControl(); as control) {
          <div class="ix-card__control">
            <ix-slide-toggle
              [label]="control.label"
              [checked]="control.checked"
              [disabled]="control.disabled || false"
              (change)="onControlChange($event)">
            </ix-slide-toggle>
          </div>
        }

        <!-- Header Menu -->
        @if (headerMenu(); as menu) {
          @if (menu.length) {
            <div class="ix-card__menu">
              <ix-icon-button
                name="dots-vertical"
                library="mdi"
                size="md"
                [ixMenuTriggerFor]="cardMenu"
                ariaLabel="Card menu">
              </ix-icon-button>
              <ix-menu
                #cardMenu
                [items]="menu"
                (menuItemClick)="onHeaderMenuItemClick($event)">
              </ix-menu>
            </div>
          }
        }
      </div>
    </div>
  }

  <!-- Content section -->
  <div class="ix-card__content">
    <ng-content></ng-content>
  </div>

  <!-- Footer section -->
  @if (hasFooter()) {
    <div class="ix-card__footer">
      <div class="ix-card__footer-left">
        @if (footerLink(); as link) {
          <button
            type="button"
            class="ix-card__footer-link"
            (click)="link.handler()">
            {{ link.label }}
          </button>
        }
      </div>

      <div class="ix-card__footer-right">
        @if (secondaryAction(); as action) {
          <ix-button
            [label]="action.label"
            variant="outline"
            color="default"
            [disabled]="action.disabled || false"
            (click)="action.handler()">
          </ix-button>
        }

        @if (primaryAction(); as action) {
          <ix-button
            [label]="action.label"
            variant="filled"
            color="primary"
            [disabled]="action.disabled || false"
            (click)="action.handler()">
          </ix-button>
        }
      </div>
    </div>
  }
</div>